{% extends "base.html" %}
{% load i18n %}

{% block title %}{{ page_title }}{{ block.super }}{% endblock %}

{% block extra_header %}
<link href="{{ STATIC_URL }}css/datepicker3.css" rel="stylesheet">
{% endblock %}

{% block content %}
{% if error_invalid_date %}
<div class="alert alert-danger" role="alert">
    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
    <span class="sr-only">Error:</span>
    {% trans "Please input a valid date range." %}
</div>
{% endif %}

<div id="heading" id="" class="row mb-20">
    <div class="col-md-12">
        <h3>{{ page_title }}</h3>
    </div>
</div>

<div id="filter" class="row mb-20">
    <div class="col-md-12">
        <p><strong>{% trans "Filter" %}</strong></p>
        <form method="post" action="{% url "report_auto" %}" class="form-inline">
            <div class="form-group">
                <input type="text" class="form-control datepicker" id="t0" name="t0" placeholder="{% trans "Start Date" %}">
            </div>
            <div class="form-group">
                <label for="t1">&nbsp;&nbsp;&mdash;&nbsp;&nbsp;</label>
                <input type="text" class="form-control datepicker" id="t1" name="t1" placeholder="{% trans "End Date" %}">
            </div>
            <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
            <button type="submit" class="btn btn-default">{% trans "Filter" %}</button>
        </form>
    </div>
</div>

<div id="content" class="row mb-20">
    <div class="col-md-12">
        {% if date_range %}
        <p>{% trans "Period:" %} {{ date_range.t0 }} - {{ date_range.t1 }}</p>
        <br>
        {% endif %}
        
        {% if auto_calc %}
        <table class="table table-striped table-hover table-condensed">
            <thead>
                <tr>
                    <th>#</th>
                    <th>{% trans "Time Processed" %}</th>
                    <th>{% trans "Start Time (t0)" %}</th>
                    <th>{% trans "End Time (t1)" %}</th>
                    <th>{% trans "Estimated Damage" %}</th>
                    <th>{% trans "Estimated Loss" %}</th>
                    <th>{% trans "Result" %}</th>
                </tr>
            </thead>
            <tbody>
                {% for ac in auto_calc %}
                <tr>
                    <td>{{ forloop.counter {}.</td>
                    <td>{{ ac.t1 }}</td>
                    <td>{{ ac.t0 }}</td>
                    <td>{{ ac.t1 }}</td>
                    <td>{{ ac.damage }}</td>
                    <td>{{ ac.loss }}</td>
                    <td><a href="javascript:void(0);">Report</a> | <a href="javascript:void(0);">Shapefile</a> | <a href="javascript:void(0);">Calculation File</a></td>
                </tr>
                {% endfor %}
                <!--
                <tr>
                    <td>1.</td>
                    <td>2015-03-04 18:00</td>
                    <td>2015-03-03 12:00</td>
                    <td>2015-03-04 18:00</td>
                    <td>In Progress</td>
                    <td>In Progress</td>
                    <td>In Progress</td>
                </tr>
                <tr>
                    <td>2.</td>
                    <td>2015-03-04 12:00</td>
                    <td>2015-03-03 12:00</td>
                    <td>2015-03-04 12:00</td>
                    <td>1.250.000.000,00</td>
                    <td>1.000.000.000,00</td>
                    <td><a href="javascript:void(0);">Report</a> | <a href="javascript:void(0);">Shapefile</a> | <a href="javascript:void(0);">Calculation File</a></td>
                </tr>
                <tr>
                    <td>3.</td>
                    <td>2015-03-04 06:00</td>
                    <td>2015-03-03 12:00</td>
                    <td>2015-03-04 06:00</td>
                    <td>1.000.000.000,00</td>
                    <td>750.000.000,00</td>
                    <td><a href="javascript:void(0);">Report</a> | <a href="javascript:void(0);">Shapefile</a> | <a href="javascript:void(0);">Calculation File</a></td>
                </tr>
                <tr>
                    <td>4.</td>
                    <td>2015-03-04 00:00</td>
                    <td>2015-03-03 12:00</td>
                    <td>2015-03-04 00:00</td>
                    <td>750.000.000,00</td>
                    <td>500.000.000,00</td>
                    <td><a href="javascript:void(0);">Report</a> | <a href="javascript:void(0);">Shapefile</a> | <a href="javascript:void(0);">Calculation File</a></td>
                </tr>
                <tr>
                    <td>5.</td>
                    <td>2015-03-03 18:00</td>
                    <td>2015-03-03 12:00</td>
                    <td>2015-03-03 18:00</td>
                    <td>500.000.000,00</td>
                    <td>250.000.000,00</td>
                    <td><a href="javascript:void(0);">Report</a> | <a href="javascript:void(0);">Shapefile</a> | <a href="javascript:void(0);">Calculation File</a></td>
                </tr>
                -->
            </tbody>
        </table>
        {% else %}
        <p class="text-center">{% trans "No results found. Try again later." %}</p>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_footer %}
<script src="{{ STATIC_URL }}js/bootstrap-datepicker.js"></script>
{% endblock %}